<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="../../lib/Sortable.min.js"></script>

    <link rel="stylesheet" href="../../css//bnk_app/bnk_app_010100_modify.css">
    <link rel="stylesheet" href="../../css/style.css">
    
</head>
<body>
    <div class="content_container">
        <div class="main_contents_type2">
                <div class="left_menu_container">
                    <div class="menu_top_container">
                        <div class="menu_title_container">
                            <span>메뉴상태</span>
                            <div>
                                <input type="checkbox" id="menu_state_use">
                                <label for="menu_state_use">미사용 포함</span>
                            </div>
                        </div>
                        <div class="search_bar_type2">
                            <input type="text" placeholder="메뉴명, 메뉴ID">
                            <div id="search_icon">
                                <img src="../../img/search_icon.svg">
                            </div>
                        </div>
                        <button>메뉴 일괄
                            <div class="menu_io_icon">
                                <img src="../../img/download.svg">
                            </div>
                        </button>
                    </div>
                    <div class="tree_menu_container">
                        <div class="tree_move_btn_container">
                            <button>메뉴 이동</button>
                            <button>하위메뉴 추가</button>
                        </div>
                        <ul class="tree_menu" style="width: 248px; height: 605px"></ul>
                    </div>
                </div>

          
        
            <div class="right_contents_container">
                <table class="table_list_type2">
                    <tbody>
                        <tr>
                            <th style="min-width: 180px" class="table_header_col">상위항목</th>
                            <td class="table_data_col">바이오인증</td>
                        </tr>
                        <tr>
                            <th style="min-width: 180px" class="table_header_col">메뉴 사용여부</th>
                            <td class="table_data_col menu_use_radio">
                                <div class="radio-group">
                                    <label class="radio-container">
                                        <input type="radio" name="reservation" value="yes" id="yes">
                                        <div class="radio-label"></div>사용
                                    </label>
                                    <label class="radio-container">
                                    <input type="radio" class="radio-space" name="reservation" value="no" id="no" checked>
                                        <div class="radio-label"></div>미사용
                                    </label>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <th style="min-width: 180px" class="table_header_col">메뉴ID</th>
                            <td class="table_data_col">AIB_GATE1</td>
                        </tr>
                        <tr>
                            <th style="min-width: 180px" class="table_header_col">메뉴명</th>
                            <td class="table_data_col">
                                <input class="table_input_col" type="text" value="i-ONE뱅크(개인)">
                            </td>
                        </tr>
                        <tr>
                            <th style="min-width: 180px" class="table_header_col">메뉴종류</th>
                            <td class="table_data_col">앱</td>
                        </tr>
                        <tr>
                            <th style="min-width: 180px" class="table_header_col">최종수정</th>
                            <td class="table_data_col">admin (2019-04-15 22:30:04)</td>
                        </tr>
                    </tbody>
                </table>

                <div class="table_list_type3_container">
                    <div class="data_table_2_btn_container">
                        <button class="table_change_btn1 active" onclick="table_change_btn1()">메뉴 속성 설정</button>
                        <button class="table_change_btn2" onclick="table_change_btn2()" class="active">서비스 시간설정</button>
                    </div>
                    <table class="table_list">
                        <thead>
                            <tr>
                                <th>속성명</th>
                                <th>속성ID</th>
                                <th>설정</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>메뉴구분
                                    |
                                    <span style="color: blue;">  필수</span>
                                </td>
                                <td>c_view_tpye</td>
                                <td>
                                    <input class="input-space" type="text" value="2" placeholder="숫자">
                                </td>
                            </tr>
                            <tr>
                                <td>큰글씨 전환버튼 표기여부</td>
                                <td>c_big_menu_yn</td>
                                <td class="menu_use_radio">
                                    <div class="radio-group">
                                        <label class="radio-container">
                                            <input type="radio" name="reservation" value="yes" id="yes">
                                            <div class="radio-label"></div>예
                                        </label>
                                        <label class="radio-container">
                                        <input type="radio" class="radio-space" name="reservation" value="no" id="no" checked>
                                            <div class="radio-label"></div>아니오
                                        </label>
                                    </div>
                                </td>
                            </tr>

                        </tbody>
                    </table>
                    <table class="table_list_type2">
                        <tbody>
                            <tr>
                                <th class="table_header_col">사용여부*</th>
                                <td class="table_data_col menu_use_radio">
                                <div class="radio-group">
                                    <label class="radio-container">
                                        <input type="radio" name="reservation" value="yes" id="yes">
                                        <div class="radio-label"></div>사용
                                    </label>
                                    <label class="radio-container">
                                    <input type="radio" class="radio-space" name="reservation" value="no" id="no" checked>
                                        <div class="radio-label"></div>미사용
                                    </label>
                                </div>
                                </td>
                            </tr>
                            <tr>
                                <th class="table_header_col">거래제어 시간*</th>
                                <td class="table_data_col">
                                    <div class="multi_row_container">영업일
                                        <div class="input_container">
                                            <input class="input-space" type="text" placeholder="HHmm">~<input class="input-space" type="text" placeholder="HHmm">
                                        </div>
                                    </div>
                                    <div class="multi_row_container">토요일
                                        <div class="input_container">
                                            <input class="input-space" type="text" placeholder="HHmm">~<input class="input-space" type="text" placeholder="HHmm">
                                        </div>
                                    </div>
                                    <div class="multi_row_container">공휴일
                                        <div class="input_container">
                                            <input class="input-space" type="text" placeholder="HHmm">~<input class="input-space" type="text" placeholder="HHmm">
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        
                        </tbody>
                    </table>
                </div>

                <div class="right_contents_bottom_container">
                    <div class="right_contents_btn_container">
                        <button class="delete_btn">삭제</button>
                        <button class="regist_btn">저장</button>
                    </div>
    
                    <div class="info_container">
                        <div class="info_inner">
                            <ul>
                                <li>
                                    <img src="../../img/dot.svg">
                                    <span class="info_title">
                                        [메뉴뷰 구분]
                                    </span>
                                    <span class="info_text">
                                        1 : 네이티브, 2 : 하이브리드, 3: 외부링크 연동
                                    </span>
                                </li>
    
                                <li>
                                    <img src="../../img/dot.svg">
                                    <span class="info_title">
                                        [서비스여부]
                                    </span>
                                    <span class="info_text">
                                        false : 서비스 불가 true : 서비스 가능
                                    </span>
                                </li>
    
                                <li>
                                    <img src="../../img/dot.svg">
                                    <span class="info_title">
                                        [서비스 불가 이유]
                                    </span>
                                    <span class="info_text">
                                        * 해당메뉴 서비스 불사 사유 출력 default reason 사용시 제외 가능("서비스 준비 중입니다.")
                                    </span>
                                </li>
    
                                <li>
                                    <img src="../../img/dot.svg">
                                    <span class="info_title">
                                        [서비스 불가 대응방법]
                                    </span>
                                    <span class="info_text">
                                        * 해당 값이 있는 경우 c_reason 에 해당 메시지 더해서 보여 줌
                                    </span>
                                </li>
    
                                <li>
                                    <img src="../../img/dot.svg">
                                    <span class="info_title">
                                        [메뉴숨김여부]
                                    </span>
                                    <span class="info_text">
                                        false : 보임 true : 숨김
                                    </span>
                                </li>
                                
                                <li>
                                    <img src="../../img/dot.svg">
                                    <span class="info_title">
                                        [수행가능버전]
                                    </span>
                                    <span class="info_text">
                                        현재 기능에서 수행이 가능한 버전
                                    </span>
                                </li>
                                
                                <li>
                                    <img src="../../img/dot.svg">
                                    <span class="info_title">
                                        [필요 로그인 레벨]
                                    </span>
                                    <span class="info_text">
                                        1 : 로그인, 2 : 로그인/비로그인, 3 : 비로그인 / 로그아웃 후 이동
                                    </span>
                                </li>
    
                                <li>
                                    <img src="../../img/dot.svg">
                                    <span class="info_title">
                                        [서브타이틀명]
                                    </span>
                                    <span class="info_text">
                                        * 현재 값이 있는경우 사용하고 없는경우 c_menu_title 를 보여줌 (c_menu_title 값 안맞는거 변경 필요)
                                    </span>
                                </li>
    
                                
                                <li>
                                    <img src="../../img/dot.svg">
                                    <span class="info_title">
                                        [메뉴 URL]
                                    </span>
                                    <span class="info_text">
                                        메뉴뷰가 image web인 경우 호출할 URL : *개인뱅킹의 경우 Native menu에서 각 메뉴 이동시 사용 현<br>
                                        기업뱅킹과 같이 gateway.jsp 하나의 통로를 사용 할 경우 삭제 가능
                                    </span>
                                </li>
                                
                                <li>
                                    <img src="../../img/dot.svg">
                                    <span class="info_title">
                                        [맞춤메뉴대상여부]
                                    </span>
                                    <span class="info_text">
                                        맞춤메뉴 대상여부
                                    </span>
                                </li>
                                
                                <li>
                                    <img src="../../img/dot.svg">
                                    <span class="info_title">
                                        [통합검색에서 해당메뉴검색가능여부등록]
                                    </span>
                                    <span class="info_text">
                                        합검색에서 해당메뉴검색가능여부등록 트리에서보일경우 여, 숨김메뉴는 부
                                    </span>
                                </li>
    
                                <li>
                                    <img src="../../img/dot.svg">
                                    <span class="info_title">
                                        [메뉴배치코드]
                                    </span>
                                    <span class="info_text">
                                        전체메뉴트리를 보여질때 메뉴명 옆에 메뉴배지코드에 해당하는 배지표기 0,공백:표기없음, 1:NEW배지,<br>
                                            2:UPDATE배지, 3: EVENT배지
                                    </span>
                                </li>
                                
                                <li>
                                    <img src="../../img/dot.svg">
                                    <span class="info_title">
                                        [큰글씨 전환버튼 표기여부]
                                    </span>
                                    <span class="info_text">
                                        해당메뉴에 상단bar에 큰글씨 화면의 전환버튼(큰글씨설정값에 따라) 추가 true: 큰글씨화면<br>
                                        전환버튼표기 / 공백 or false : 큰글씨화면 전환버튼 표기 안함 
                                    </span>
                                </li>
                                
                                <li>
                                    <img src="../../img/dot.svg">
                                    <span class="info_title">
                                        [큰글씨 메뉴아이디]
                                    </span>
                                    <span class="info_text">
                                        해당메뉴에 상응하는 큰글씨 메뉴아이디 (큰글씨인경우 일반메뉴 아이디)
                                    </span>
                                </li>
    
                                <li>
                                    <img src="../../img/dot.svg">
                                    <span class="info_title">
                                        [큰글씨 메뉴url]
                                    </span>
                                    <span class="info_text">
                                        해당메뉴에 상응하는 큰글씨 메뉴URL (큰글씨인경우 일반메뉴 URL)
                                    </span>
                                </li>
    
                                <li>
                                    <img src="../../img/dot.svg">
                                    <span class="info_title">
                                        [쉬운뱅킹 메뉴아이콘 URL]
                                    </span>
                                    <span class="info_text">
                                        뱅크사인 스토어 url
                                    </span>
                                </li>
    
                                <li>
                                    <img src="../../img/dot.svg">
                                    <span class="info_title">
                                        [간편회원 접근불가능 여부]
                                    </span>
                                    <span class="info_text">
                                        간편회원 접근불가능한 메뉴 여부 : true -> 접근불가능(제어) / false -> 접근가능(미 제어)-디폴트
                                    </span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
   
    
<script>

let jsonData = [
            {
                "name": "i-ONE뱅크(개인)",
                "depth": 1,
                "use_state": true,
                "children": [
                    {
                        "name": "메인",
                        "depth": 2,
                        "use_state": true,
                        "children": [
                            { "name": "개인형IRP링크", "depth": 3, "use_state": true },
                            { "name": "카드혜택", "depth": 3, "use_state": true }
                        ]
                    }
                ]
            }
        ];

        // 초기 트리생성
        createTree(jsonData, document.querySelector(".tree_menu"));
                
        // 트리생성
        function createTree(data, parentEl) {
            parentEl.innerHTML = ""; // 기존 트리 초기화
            data.forEach(item => {
                let li = document.createElement("li");
                
                li.innerHTML +=
                    item.children ? "<img src='../../img/tree_folder.svg'>":"<img src='../../img/tree_file.svg'>";
                    li.innerHTML +=
                    item.children ? "<img src='../../img/tree_folder.svg'>":"<img src='../../img/tree_file.svg'>";
                // li.textContent += item.name;
                // li.dataset.name += item.name;

                
                let ul = document.createElement("ul");
                li.appendChild(ul);
                parentEl.appendChild(li);

                if (item.children) {
                    createTree(item.children, ul);
                }

                // new Sortable(ul, {
                //     group: data.depth,
                //     animation: 150,
                //     fallbackOnBody: true,
                //     swapThreshold: 0.65
                // });

                ul.onclick = (e) =>{
                    alert("?");
                }
            });
        }

        

        // 팝업 열기
        function openPopup() {
            let popup = window.open("popup.html", "popup", "width=600,height=600");
            setTimeout(() => {
                popup.postMessage(JSON.stringify(jsonData), "*");
            }, 1000);
        }

        // 메시지 받기
        window.addEventListener("message", function(event) {
            if (event.data) {
                let updatedJson = JSON.parse(event.data);
                console.log("부모 창에서 받은 JSON:", updatedJson);
                jsonData = updatedJson;
                generateTree(jsonData, document.getElementById("tree")); // 트리 다시 그리기
            }
        });



</script>
    
</body>
</html>